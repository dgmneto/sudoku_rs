use sudoku_rs::{grid, solver};

use criterion::BenchmarkId;
use criterion::Criterion;
use criterion::{criterion_group, criterion_main};

pub fn benchmark(c: &mut Criterion) {
    let mut naive_backtracking = c.benchmark_group("Naive Backtracking");
    for (idx, line) in RANDOM_SAMPLES[0..10].iter().enumerate() {
        naive_backtracking.bench_with_input(
            BenchmarkId::from_parameter(format!("Random Sample {}", idx)),
            line,
            |b, line| {
                let grid = grid::from_line(line);
                b.iter(|| solver::solve(grid, 0, 0).unwrap());
            },
        );
    }

    for (idx, line) in HARD_SAMPLES.iter().enumerate() {
        naive_backtracking.bench_with_input(
            BenchmarkId::from_parameter(format!("Hard Sample {}", idx)),
            line,
            |b, line| {
                let grid = grid::from_line(line);
                b.iter(|| solver::solve(grid, 0, 0).unwrap());
            },
        );
    }
    naive_backtracking.finish();
}

criterion_group!(benches, benchmark);
criterion_main!(benches);

const HARD_SAMPLES: [&str; 1] = [
    "..............3.85..1.2.......5.7.....4...1...9.......5......73..2.1........4...9",
];

const RANDOM_SAMPLES: [&str; 100] = [
    "4....927...5.1........6.9.8..1.86...6..4.......9..1.5....348.........132....7....",
    "..5.4.2..9.1......37...86.5........17..8...3.6..2..7...........5...9...3.894....6",
    "8.....29.62..............78....14....1.37.82..7...2.6......3..6.6....5..93.84....",
    ".8..9.....2..4...5..3.5.18..6.83.........73.1....1...9.15....323.......8..4......",
    ".5..3......2..79....7.462..2...98....38.....5..1.....9....2.....6.1..74....9.4..1",
    "97..8.....2..34...4.1...2.6..51....8.....8.....4.7..5....3..1.26......7.....6.3..",
    "4.52.....7...1..5..925.8....8..4.........126...98.5.4...37....1....6.32........7.",
    "3.9..1..........4.5.6...3...85.79...9....6.....18....9.67.9..8.1...53........7..2",
    ".8...4....73........65...2.52.4...78...1.8..9.6....15....8...1.........2.4..95..7",
    "4..3.......1..932.7....6...31....5......9.2.89..5...4.26......1...1....5..4.5.69.",
    "4....38.....8........9...74..1....9..3..18.....7...64..2.......3.....16..6.7..589",
    "..59...4.8........63.74...89...........2.6.3.....3.2.....16.78.4....9.....28...5.",
    ".92...5......2..7.5.....1.317923..........3..4...16.......48....6.9......2....938",
    ".2.....16......5..6.98..7....2.9.3...9.41..2........5.4..73.....38........7..6..5",
    "...8..2.5........3...16..8..4.9.5...5.......6...2....4.1648.7.....69......7...9..",
    "...71..4.2..6...8...4.3.6....2.......51.......6.85...7..............6..48..2.4.19",
    ".1.5....7...43....5.8.....11.2....7...4.85..36......8...63.4..9......21.8....6...",
    ".7....8...9..54....2....495...8.2.....2.....7..1.6.......9...8..38.7..46.....5.7.",
    "1.42...3..36...1.958......76..1.........2.4....5.38.61..89.........84..6.......5.",
    ".7..2.81.8....5..9.4...........8.1....14..9..2..6.....9...51.233.............6.5.",
    "....938.....6.4..35..2......8....4.53..9...7..4..76..2..2..9...7..8..6...61......",
    ".....4..33.7..8....4..2.5..7.36.......6.1......59..7.46.1.39.8..........9..1...3.",
    ".....65........17...2.....99.4.....86.....4..1..3.....28.....9..3..5.842...9.....",
    ".....71..........8921...7....7.2......4.3.9..1.85.4..23....84..5...4..3..72..3..5",
    "4.......79......1.7..935.8..72.1...3............8.9..51394.........7..3....5..6..",
    "....6...2.79.5....3.6..4..8..5.....9.....8.5.4...9.8...5.6...9.6.8..1.....17.....",
    "...6.........1729......5..37839....2....7.....2....6......8912.......4...527..3.8",
    "78...3...9...8.5...5.1..8.6...348.5.....5..........47..9.73...8....1.....65....9.",
    ".5...1893..3...5.......6...9.1.6.....2..7.48.8.......5....1..274.........62..8...",
    "8.......2.6..1.8.9.3...5...4....9...3......2...26....46...7.298.1...35.....58....",
    ".....9....4.7.8.....2.4..8..96..3.2.....1...9..8...5....1.9...5..5..1...72....43.",
    ".36....1........237.4.1...951...9.....9..8..4....5....9..6...51.........8...42...",
    "...4...7.4.7.8....5.291.4..........4..9....25...2.13.....8.2.9.3...9....7......8.",
    "..46.7...57...4..66...5..9...65....4.128..6..8...............4..3......1..5..283.",
    ".....4..8683.......1....5..1.......7..8.2..6...91....2.569.....3....14..2..6..8.3",
    "...23.......8..62..8...91..93....2..6.8.........5....4.45.......7....8..3..19....",
    ".3.62......4..1.73....5.9.6..5..4...1..8....2..8.7.6...9.2....73.......1..1..9...",
    "3....921....4.5....6....8...2..8..35.....4927..3...4.......2...1.....6..4..3...9.",
    "....5.1432.....9..754..3.........4...82..93.......4.1..6.2.....9.....85.8...3....",
    "25.7...8.....8..7...7.....4.6..2.9.1...61..5...5....2.43.5...9.......3......47..6",
    "........1....7.........24.3.5.91...8..6.3...21..5..7...7.6.4....2.....5...1......",
    ".9...8....2....9.78..4..36...47.1.52.538...7...7.2........43....39.....8......1..",
    ".9.7...6...61...3.4..2.5.....1...8.5.7....4.....31..7.3.5..8........4.........65.",
    "..8......4.7.51..8...46...5.8..3.7.....6.5.9.1.2.....43...........9..42.......1.9",
    "4.8.1.....1.7.6.......3..8....57.69...2..1...69....8.1.76....4...5....7.........3",
    ".35....87.8..64....9........1.....7...753....5.2...8...2..1...3...3.9.6.1........",
    "...9..8.......7..57...2...9.1..7..3.32...4...4.7..5.161..2.3.......1.....6.8.....",
    "..5..9...1....6.2......853......4..9.7.9.18....28.....3.......4..1....98...5...6.",
    "....5..3...1..4....97..2..5.........4.3.98.....97..6.21...4..7.6...83......6.....",
    ".5.1...7...2.5.....6...75........4..2.......69..86.1....379..2..........57.4.....",
    "..6.18...4...6...9.8.2.5........712....32..9...........25...87...4....3.96....2..",
    "..759....6...3...1.84......3.267..5...........1...56..5......2..4.....8....7.4.3.",
    "2....938..6..2....95.36.....7.......6...........5..892...8.2..9.......613.7......",
    "........4.6.1.8...89......13.82..9.5.2..5....9..3.......1..642.....2.8.....8.57..",
    ".6.3....1...1.6......2..84..2.6..5......782..9.3.......36....7..8.7...2...5.6....",
    "......3.....2.4.8..5...1.74..6.5...7...........134.25..45.8...1.2.....3..6.4.5...",
    ".....61.9.5.7.......2.....49.3.5.8.....4.7...5..6...7.6...3.....945...........6..",
    ".5....39.6...32..72...1....5.62.9.4...2.....3.7......8.........785........18...5.",
    "7......3..9...1.....14.25...4.2.3..1....65..7.........48.3...6.............5..273",
    "...1..6....7.32.1..2....5.......3....9...8.746...5....4.8.9............5.75..62.8",
    "......2.1..43.........576....2..3...1..2..93...6.4..1.5....6.9..984.........2.7..",
    "9...3...8..459.61.8...1........42....7.8.....32.9..8........5...5.7..2..1..3...7.",
    "1.8..........4.6.8.9...734.....3......3.2649.8..4.....7.1...5.9...........2....16",
    ".1.........85..9.....8.6..4..7.....29...5...73.1....8.....7...8..29......6..3.52.",
    "3.7.......6..38....82.1..7.891..72...73.8.....2.......5....4.....8.61..3.3..7..5.",
    "...7.53..........1...9.6.8736.5.74..1.......924.3..5..5.1..9.......4..6..........",
    "..73...2.....2...8.43.896...1.......6....5..4834....6.....72.8.4....69.....1.....",
    ".9..4.....5...9..81..5....9..63..981..8....3..1...4....6..95.2..8.........1.6.3.4",
    "2...7896.18.5..7...........8.6....9......5.86.7...32.....3.2.......4.....1...98..",
    "...4.6...1.........56...8...8..6.459.....3.7....7.......79..2.8.6421...3....3....",
    "........7.7...41..4...3.......5.283...6.....2..2.4..9.3.7.9....64........9.213...",
    "5..9.4.671...3.....6........15....7...7....15.2....4..9.6.8.....4...52...5..7..9.",
    "6....53...5..6..1.1.......2..3..72.99.5......8......7..1.4...3..4....5.....6.9...",
    "....2..9.4.6.1...5..9.841...17..8.........4.7.3....2........3......95....85..3..1",
    "1.95.....2...3..8..5..41.....1..5.2...6....7......8..5......1......5..347.42....6",
    "....3.4..86...72.......6.5....9.57.4..8...56..4......1.........6..5.2.9..1.68..4.",
    "..3..2.5.7....4..8...........2.5...79...674.....2....14......13.58......32.8...7.",
    ".1.......6......919..75.3.47..3........4.....3.421...8.6..7..3........59..2..38..",
    "3.....8.2..2....7....35....8..164.2......95.6.2...........7.61..47..........9845.",
    "7.6...9..........8...68.1...7.8.5......7....59...4.....5.1..4.7..2.6...1......5.2",
    "..4.9....1.8..629....7......6.3..5......7....7..4.9...68......5..5..81.2........3",
    "........33..5.........1.7.84.3.....51...6.2.7.67..9..........3.2.5...9..6.829....",
    ".1........8..6951....84.7..............62.4....37.56....6....5....3....77.2.9...4",
    "3.......17..9..4....4.8..9...1...238.3.......9.....7.....2.1...54....9...2..65...",
    "8...6.71.6.2.....4...3...5...7......5....1.32.8..4...9...197....45..6......4.....",
    "........187.....5234.7.........3..6.4.6....3.9...2...5....4..1....9....8..568.7..",
    "...7.14....9.5...73..4..5..915.7......75..1.......26.......3.4.....8.76.2.6......",
    "7..3..1.8..2...76.....8.......4.2..76..87..34......2....87.4..1..6.2......9..5.4.",
    "...5.81..2...6..3..68..92............71...34.4..15..2.6.2.47....5......8..7......",
    "..6...91.....3.6..1...5...8..98..34.31.4..........5.9.4.2....7.6...........7...29",
    ".8...6...5..8..7...7..93.2.....3...82..4.7.5..6..5.43...6.........9....39.....5.1",
    "1..5..8.627..9..4......1...5.64..27..972....5....8.....34.....79...5..........9..",
    "....58.39.....95.1...6.....3.4......51......7.8..2......21.5.6.7......14.9..84...",
    "2...8..4...6.71...9.....8.3....1...4....4.9..8.93.7..........25....327...5....4..",
    ".8..........4...9..1.7..58.7..685.4..3.........4..........2..69.....37.416..5...3",
    "....1...........46.....817.8....2..7......83..51.....99.8.......439.7.2.....63.8.",
    ".4...81.9..8.71.........48..7..6.94....3.42..4...2..6.93....7....1.......8....395",
    "9...1....1..7...3....6....7.........3..4.16....7.35.2...1..2.6..2.8..7.9.9..5.2..",
    "....5....16......45.2..6..7.27....684..3.......87......9..3.6.....84..5..5..7....",
    ".57......1...8..56..2..79.3.6.52........3..8......1....4....1..3...98..5..6..4..9",
];
